<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EnviLog Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="dashboard">
        <h1>EnviLog Dashboard</h1>
        
        <!-- Network Mode Status Card -->
        <div class="card mode-status" id="mode-status">
            <h2>Network Mode</h2>
            <div class="mode-indicator">
                <span class="mode-badge" id="mode-badge">Unknown</span>
                <span class="mode-details" id="mode-details">Checking...</span>
            </div>
            <div class="connection-status" id="connection-status"></div>
            
            <!-- Mode Control Buttons -->
            <div class="mode-controls" id="mode-controls">
                <button type="button" id="switch-to-ap-btn" class="mode-btn secondary" style="display: none;">
                    Switch to AP Mode
                </button>
                <button type="button" id="switch-to-station-btn" class="mode-btn primary" style="display: none;">
                    Connect to WiFi
                </button>
                <div class="mode-help" id="mode-help" style="display: none;">
                    <small>Configure WiFi settings below, then click "Connect to WiFi"</small>
                </div>
            </div>
        </div>

        <div class="status-grid">
            <!-- System Info Card -->
            <div class="card" id="system-info">
                <h2>System Status</h2>
                <div class="status-item">
                    <span>Free Heap:</span>
                    <span id="heap-size">Loading...</span>
                </div>
                <div class="status-item">
                    <span>Uptime:</span>
                    <span id="uptime">Loading...</span>
                </div>
            </div>

            <!-- Network Info Card -->
            <div class="card" id="network-info">
                <h2>Network Details</h2>
                <div class="status-item">
                    <span>IP Address:</span>
                    <span id="ip-address">Loading...</span>
                </div>
                <div class="status-item" id="sta-info" style="display: none;">
                    <span>WiFi SSID:</span>
                    <span id="wifi-ssid">-</span>
                </div>
                <div class="status-item" id="rssi-info" style="display: none;">
                    <span>Signal Strength:</span>
                    <span id="rssi">-</span>
                </div>
            </div>

            <!-- Sensor Data Card -->
            <div class="card" id="sensor-info">
                <h2>DHT11 Sensor</h2>
                <div class="status-item">
                    <span>Temperature:</span>
                    <span id="temperature">Loading...</span>
                </div>
                <div class="status-item">
                    <span>Humidity:</span>
                    <span id="humidity">Loading...</span>
                </div>
            </div>
        </div>

        <!-- Configuration Section -->
        <div class="config-section">
            <!-- Network Configuration -->
            <div class="card">
                <h3>WiFi Configuration</h3>
                <div class="config-info" id="config-info">
                    <p class="info-text">Configure your WiFi settings below. Changes will be applied based on the current network mode.</p>
                </div>
                <form id="network-config-form" class="config-form">
                    <div class="form-group">
                        <label for="wifi-ssid">WiFi SSID:</label>
                        <input type="text" id="wifi-ssid-input" name="wifi_ssid" placeholder="Enter WiFi network name">
                    </div>
                    <div class="form-group">
                        <label for="wifi-password">WiFi Password:</label>
                        <input type="password" id="wifi-password-input" name="wifi_password" placeholder="Enter WiFi password">
                    </div>
                    <button type="submit" id="save-wifi-btn">Save WiFi Settings</button>
                </form>
            </div>

            <!-- MQTT Configuration -->
            <div class="card">
                <h3>MQTT Settings</h3>
                <form id="mqtt-config-form" class="config-form">
                    <div class="form-group">
                        <label for="broker-url">Broker URL:</label>
                        <input type="text" id="broker-url" name="broker_url" placeholder="mqtt://broker.example.com">
                    </div>
                    <button type="submit">Save MQTT Settings</button>
                </form>
            </div>
        </div>
    </div>
    <script src="/js/main.js"></script>
</body>
</html>
